<?xml version="1.0" ?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
    DefaultTargets="Detours">
  <ItemDefinitionGroup>
    <ClCompile>
      <AdditionalIncludeDirectories>$(MSBuildProjectDirectory)\deps\include\detours\src;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
    </ClCompile>
    <Link>
      <AdditionalLibraryDirectories>$(MSBuildProjectDirectory)\deps\lib\detours\;%(AdditionalLibraryDirectories)</AdditionalLibraryDirectories>
      <AdditionalDependencies>detours.lib;%(AdditionalDependencies)</AdditionalDependencies>
    </Link>
  </ItemDefinitionGroup>
  <ItemGroup>
    <OutputFiles Include="$(MSBuildProjectDirectory)\deps\include\detours\lib.$(Platform)\*" />
  </ItemGroup>
  <Target Name="Detours" Outputs="detours.lib">
    <Exec Command="nmake" WorkingDirectory="$(MSBuildProjectDirectory)\deps\include\detours\src" />
    <MakeDir Directories="$(MSBuildProjectDirectory)\deps\lib"/>
    <Move SourceFiles="@(OutputFiles)" DestinationFolder="$(MSBuildProjectDirectory)\deps\lib" />
  </Target>
</Project>
